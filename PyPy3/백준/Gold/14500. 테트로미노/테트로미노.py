import sys

N, M = map(int, sys.stdin.readline().split())
arr = [list(map(int, sys.stdin.readline().split())) for _ in range(N)] 

dir = [
    [[0, 0, 0, 0], [0, 1, 2, 3], 1, 4], # ㅡ
    [[0, 1, 2, 3], [0, 0, 0, 0], 4, 1],

    [[0, 0, 1, 1], [0, 1, 0, 1], 2, 2], # ㅁ

    [[0, 1, 2, 2], [0, 0, 0, 1], 3, 2], # L
    [[1, 1, 1, 0], [0, 1, 2, 2], 2, 3],
    [[0, 0, 1, 2], [0, 1, 1, 1], 3, 2], 
    [[0, 0, 0, 1], [0, 1, 2, 0], 2, 3],
    [[0, 1, 2, 2], [1, 1, 1, 0], 3, 2], # ┚
    [[0, 0, 0, 1], [0, 1, 2, 2], 2, 3],
    [[0, 0, 1, 2], [0, 1, 0, 0], 3, 2],
    [[0, 1, 1, 1], [0, 0, 1, 2], 2, 3],

    [[0, 1, 1, 2], [0, 0, 1, 1], 3, 2], # z
    [[1, 1, 0, 0], [0, 1, 1, 2], 2, 3], 
    [[0, 1, 1, 2], [1, 1, 0, 0], 3, 2],
    [[0, 0, 1, 1], [0, 1, 1, 2], 2, 3],

    [[0, 0, 0, 1], [0, 1, 2, 1], 2, 3], #ㅜ
    [[0, 1, 1, 2], [0, 0, 1, 0], 3, 2],
    [[0, 1, 1, 2], [1, 0, 1, 1], 3, 2],
    [[0, 1, 1, 1], [1, 0, 1, 2], 2, 3],
]

ans = 0

def check(x, ans):
    di = dir[x][0]
    dj = dir[x][1]

    n = dir[x][2]
    m = dir[x][3]

    for i in range(N-n+1):
        for j in range(M-m+1):
            temp = 0
            for k in range(4):
                temp += arr[i+di[k]][j+dj[k]]
            ans = max(ans, temp)

    return ans

for x in range(len(dir)):
    ans = check(x, ans)

print(ans)